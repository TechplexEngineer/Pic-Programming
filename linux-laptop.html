<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="LibreOffice 3.6  (Linux)">
	<META NAME="AUTHOR" CONTENT="Ecedemo cedemo">
	<META NAME="CREATED" CONTENT="20080123;12041900">
	<META NAME="CHANGEDBY" CONTENT="Blake ">
	<META NAME="CHANGED" CONTENT="20121120;14134000">
	<META NAME="CHANGEDBY" CONTENT="Blake ">
	<META NAME="CHANGEDBY" CONTENT="Blake ">
	<META NAME="CHANGEDBY" CONTENT="Blake ">
	<META NAME="CHANGEDBY" CONTENT="Blake ">
	<META NAME="CHANGEDBY" CONTENT="Blake ">
	<STYLE TYPE="text/css">
	<!--
		H2.cjk { font-family: "AR PL UMing CN" }
		H2.ctl { font-family: "Lohit Devanagari" }
		TT { background: #ffffcc }
		TT.cjk { font-family: "AR PL UMing CN", monospace }
		TT.ctl { font-family: "Lohit Devanagari", monospace }
	-->
	</STYLE>
</HEAD>
<BODY LANG="en-US" DIR="LTR">
<H2 CLASS="western" ALIGN=CENTER>Linux Setup</H2>
<OL>
	<LI><P>Open a web browser. (Ex: Firefox in <TT CLASS="western">Applications</TT>
	-&gt; <TT CLASS="western">Internet</TT> -&gt; <TT CLASS="western">Firefox</TT><TT CLASS="western">)</TT>.</P>
	<LI><P>Download pk2cmd for 2.6 kernels from <A HREF="http://ww1.microchip.com/downloads/en/DeviceDoc/pk2cmdv1-20Linux2-6.tar.gz">microchip.com</A>.
	(<A HREF="packages/pk2cmdv1-20Linux2-6.tar.gz">Also here</A>)</P>
	<LI><P>Uncompress the  <TT CLASS="western">pk2cmdv1-20Linux2-6.tar.gz</TT><BR>In
	terminal: <TT CLASS="western">tar -xf pk2cmdv1-20Linux2-6.tar.gz</TT></P>
</OL>
<OL START=4>
	<LI><P>Start a terminal. <TT CLASS="western">Applications</TT> -&gt;
	<TT CLASS="western">System</TT> <TT CLASS="western">Tools</TT> -&gt;
	<TT CLASS="western">Terminal</TT>.</P>
	<LI><P>In the terminal:</P>
	<OL>
		<LI><P>Become root by typing: <BR><TT CLASS="western">sudo bash</TT></P>
		<LI><P>Use the cp(copy) command (Ex: cp source destination)to copy
		pk2cmd and PK2DeviceFile.dat to /usr/local/bin.<BR><TT CLASS="western">cp
		pk2cmd /usr/local/bin<BR>cp PK2DeviceFile.dat /usr/local/bin</TT></P>
		<LI><P> To ensure that pk2cmd is usable to non root users, the
		permissions need to be changed:<BR><TT CLASS="western">chmod ugo+rw
		pk2cmd<BR>chmod ugo+rw PK2DeviceFile.dat</TT></P>
		<LI><P>If you are on debian or ubuntu you may need to install
		ia32-libs with apt:<BR><TT CLASS="western">sudo apt-get install
		ia32-libs</TT></P>
		<LI><P>Test your newly installed pk2cmd by typing:<BR><TT CLASS="western">pk2cmd</TT><BR>You
		should see <TT CLASS="western">Operation Succeeded</TT> at the
		bottom of the output.</P>
	</OL>
	<LI><P><A HREF="ftp://Compilers-RO:C0mP!0511@ftp.microchip.com/HI-TECH%20C%20for%20PIC10-12-16%20(PRO%20and%20Standard)/picc-9.83-linux.run">Download
	HI-TECH C for the PIC10/12/16 MCU Family for Linux</A>. (<A HREF="packages/picc-9.83-linux.zip">Also
	here</A>)</P>
	<LI><P>In the terminal:</P>
	<OL>
		<LI><P>Become root by typing: <TT CLASS="western">sudo bash</TT></P>
		<LI><P>Start the install by typing: <BR><TT CLASS="western"> sh
		./picc-9.83-linux.run</TT></P>
		<LI><P>3. When the <TT CLASS="western">SINGLE USER SOFTWARE LICENSE
		AGREEMENT</TT> appears on screen, use the enter key on your
		keyboard to advance to the end of the message. <BR>Then at the
		prompt <TT CLASS="western">Do you accept the terms of the license
		agreement?</TT> Press <TT CLASS="western">y</TT> then <TT CLASS="western">enter</TT>.</P>
	</OL>
	<LI><P>Install the compiler in <TT CLASS="western">/usr/local/picc-9.83</TT></P>
	<LI><P>Enable the compiler in <TT CLASS="western">lite</TT> mode.</P>
	<LI><P>In the terminal:</P>
	<OL>
		<LI><P>Become root by typing:<BR><TT CLASS="western">sudo bash</TT></P>
		<LI><P>Change directory:<BR><TT CLASS="western">cd /usr/local/bin</TT></P>
		<LI><P>Create a link for easy upgrading:<BR><TT CLASS="western">ln
		-s ../picc-9.83/bin/picc picc</TT></P>
		<LI><P>Test picc (your compiler) by typing:<BR><TT CLASS="western">picc</TT><BR>You
		should see HI-TECH C Compiler for PIC10/12/16 MCUs V9.83 at the top
		of the output.</P>
	</OL>
	<LI><P>Download and install rules needed to allow the programs to
	communicate with the pk2cmd:</P>
	<OL>
		<LI><P>Download these rules file by right clicking and choosing
		Save Link As... (or similar) Save the files in your downloads
		folder<TT CLASS="western"><BR><A HREF="rules/99-pickit2.rules">99-pickit2.rules</A></TT>
		and <TT CLASS="western"><A HREF="rules/99-libusb.rules">99-libusb.rules</A></TT>
				</P>
		<LI><P>Use the cd (change directory) command to point the terminal
		to downloads<BR><TT CLASS="western">cd ~/Downloads</TT></P>
		<LI><P><TT CLASS="western">Become root by typing:</TT><TT CLASS="western"><BR>sudo
		bash</TT></P>
		<LI><P>Use the mv(move) command to move the rules to
		<TT CLASS="western">/etc/udev/rules.d<BR>mv 99-pickit2.rules
		/etc/udev/rules.d/<BR>mv 99-libusb.rules /etc/udev/rules.d/</TT></P>
		<LI><P>Leave root:<BR><TT CLASS="western">exit</TT></P>
	</OL>
	<LI><P>Make a new directory that is easy to access. (On your
	desktop)<BR>In terminal:</P>
	<OL>
		<LI><P>Change directory:<BR><TT CLASS="western">cd ~/Desktop</TT></P>
		<LI><P>Create a directory for you code<BR><TT CLASS="western">mkdir
		ece101</TT></P>
		<LI><P>Change into your new directory:<BR><TT CLASS="western">cd
		ece101</TT></P>
	</OL>
	<LI><P>Use a web browser to obtain the header and library files from
	the course web site. 
	</P>
	<OL>
		<LI><P>Go <A HREF="pic_projects/libs/12">here</A> to download files</P>
		<LI><P>Right mouse click on each of the following files and save
		them into your new directory: <BR><TT CLASS="western">Makefile,
		delay.h, delay.lpp, lcd.h, lcd.lpp, printf.h, printf.lpp</TT></P>
	</OL>
	<LI><P>Use your favorite editor (gedit, nedit, vim, kate, ...) to
	write code. Save in the <TT CLASS="western">ece101</TT> directory.</P>
</OL>
<P>Entering Code</P>
<OL>
	<LI VALUE=1><P>The first line of any program shall be a comment with
	the following form: Your name, course, date, and lab day. For
	example:</P>
	<P><TT CLASS="western">// Jane Doe ECE 101 01/25/2012 Tuesday</TT></P>
	<LI><P>Following the comments are include header files. Always
	include <TT CLASS="western">pic.h</TT>. (<TT CLASS="western">#include
	&lt;pic.h&gt;</TT>)</P>
	<LI><P>If you are not using <TT CLASS="western">robot.h</TT> which
	already includes the config bits, you'll need to add the following
	line in the file where <TT CLASS="western">void main(void)</TT> is
	defined, immediately after all include &amp; preprocessor
	directives.</P>
	<P><TT CLASS="western">__CONFIG(FOSC_INTRC_NOCLKOUT &amp; WDTE_OFF &amp;
	PWRTE_OFF &amp; MCLRE_OFF &amp; CP_OFF &amp; CPD_OFF &amp; BOREN_OFF
	&amp; IESO_OFF &amp; FCMEN_OFF &amp; LVP_OFF &amp; DEBUG_OFF);</TT></P>
</OL>
<P>Compiling and Programming.</P>
<OL>
	<LI VALUE=1><P>Sign out a PICKIT2 programmer from a TA.</P>
	<LI><P>Have a TA check your wiring.</P>
	<LI><P>Connect power to you breadboard.</P>
	<LI><P>Connect both ends of the USB cable.</P>
	<LI><P>Connect your programmer to the 6 pin header on your
	breadboard. Be sure to orient the programmer correctly. The small
	white triangle on the front of the programmer points to pin1.</P>
	<LI><P>On the terminal use the <TT CLASS="western">cd</TT> command
	to change to the directory with the code you want on your robot.
	(ex: <TT CLASS="western">ece101</TT>)</P>
	<LI><P><TT CLASS="western">make T=filename<BR></TT>where <TT CLASS="western">filename</TT>
	is your name of your C code source without the <TT CLASS="western">.c</TT>
	extension. The make command will compile, link and program your
	program. If your want to just reprogram you PIC use the same command
	again.</P>
</OL>
<P><BR><BR>
</P>
<P><BR><BR>
</P>
<P><BR><BR>
</P>
<P><BR><BR>
</P>
</BODY>
</HTML>